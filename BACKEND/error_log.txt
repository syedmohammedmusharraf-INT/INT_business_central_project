
--- ERROR AT 2026-02-03 11:25:35.837684 ---
Traceback (most recent call last):
  File "C:\Users\Navvidha_Bharech\Desktop\INT Business Central Project\BACKEND\app\services\structured_service_result.py", line 95, in infer_service_alignment
    response = await structured_llm.ainvoke(prompt_text)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Navvidha_Bharech\AppData\Local\Programs\Python\Python311\Lib\site-packages\langchain_core\runnables\base.py", line 3191, in ainvoke
    input_ = await coro_with_context(part(), context, create_task=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Navvidha_Bharech\AppData\Local\Programs\Python\Python311\Lib\site-packages\langchain_core\runnables\base.py", line 5570, in ainvoke
    return await self.bound.ainvoke(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Navvidha_Bharech\AppData\Local\Programs\Python\Python311\Lib\site-packages\langchain_core\language_models\chat_models.py", line 425, in ainvoke
    llm_result = await self.agenerate_prompt(
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Navvidha_Bharech\AppData\Local\Programs\Python\Python311\Lib\site-packages\langchain_core\language_models\chat_models.py", line 1132, in agenerate_prompt
    return await self.agenerate(
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Navvidha_Bharech\AppData\Local\Programs\Python\Python311\Lib\site-packages\langchain_core\language_models\chat_models.py", line 1090, in agenerate
    raise exceptions[0]
  File "C:\Users\Navvidha_Bharech\AppData\Local\Programs\Python\Python311\Lib\site-packages\langchain_core\language_models\chat_models.py", line 1359, in _agenerate_with_cache
    result = await self._agenerate(
             ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Navvidha_Bharech\AppData\Local\Programs\Python\Python311\Lib\site-packages\langchain_openai\chat_models\base.py", line 1634, in _agenerate
    raise e
  File "C:\Users\Navvidha_Bharech\AppData\Local\Programs\Python\Python311\Lib\site-packages\langchain_openai\chat_models\base.py", line 1602, in _agenerate
    _handle_openai_bad_request(e)
  File "C:\Users\Navvidha_Bharech\AppData\Local\Programs\Python\Python311\Lib\site-packages\langchain_openai\chat_models\base.py", line 473, in _handle_openai_bad_request
    raise e
  File "C:\Users\Navvidha_Bharech\AppData\Local\Programs\Python\Python311\Lib\site-packages\langchain_openai\chat_models\base.py", line 1597, in _agenerate
    raw_response = await self.root_async_client.chat.completions.with_raw_response.parse(  # noqa: E501
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Navvidha_Bharech\AppData\Local\Programs\Python\Python311\Lib\site-packages\openai\_legacy_response.py", line 381, in wrapped
    return cast(LegacyAPIResponse[R], await func(*args, **kwargs))
                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Navvidha_Bharech\AppData\Local\Programs\Python\Python311\Lib\site-packages\openai\resources\chat\completions\completions.py", line 1670, in parse
    return await self._post(
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\Navvidha_Bharech\AppData\Local\Programs\Python\Python311\Lib\site-packages\openai\_base_client.py", line 1797, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Navvidha_Bharech\AppData\Local\Programs\Python\Python311\Lib\site-packages\openai\_base_client.py", line 1597, in request
    raise self._make_status_error_from_response(err.response) from None
openai.BadRequestError: Error code: 400 - {'error': {'message': "Invalid schema for response_format 'AlignmentInference': In context=(), 'required' is required to be supplied and to be an array including every key in properties. Extra required key 'relevant_experience' supplied.", 'type': 'invalid_request_error', 'param': 'response_format', 'code': None}}
Error Message: Error code: 400 - {'error': {'message': "Invalid schema for response_format 'AlignmentInference': In context=(), 'required' is required to be supplied and to be an array including every key in properties. Extra required key 'relevant_experience' supplied.", 'type': 'invalid_request_error', 'param': 'response_format', 'code': None}}
